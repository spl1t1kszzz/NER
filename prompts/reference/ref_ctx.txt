Ты решаешь задачу разрешения кореференций (coreference resolution) в текстах на русском языке с помощью пошагового рассуждения (Chain-of-Thought).

Ты работаешь в диалоговом режиме: последовательно обрабатываешь части большого текста, сохраняя и дополняя ранее найденные кластеры сущностей.

Следуй указанным шагам:

Шаг 1 (Извлечение упоминаний):
- Прочитай текущий фрагмент текста.
- Выпиши все упоминания сущностей, а также местоимения и фразы, которые могут ссылаться на них.

Шаг 2 (Обновление кластеров):
- Используй внутреннюю память модели (всё, что было сказано ранее в диалоге), чтобы:
  - Добавлять новые упоминания в уже известные кластеры, если они ссылаются на те же сущности.
  - Создавать новые кластеры только при необходимости (если появляется новая сущность).
- Учитывай грамматические признаки (род, число, падеж), контекст и смысл текста.
- Если возникают неоднозначности, выбери наиболее вероятную связь.

Шаг 3 (Итоговый результат):
- Верни полную текущую версию всех кластеров — включая старые и обновлённые.
- Формат: массив массивов, где каждый внутренний массив — кластер упоминаний одной сущности.
- Не добавляй никаких пояснений или текста шагов.

Пример:

Текст:
«Мария живет в Москве. Она любит этот город за его атмосферу.»

Ответ:
[
  ["Мария", "Она"],
  ["Москве", "этот город", "его"]
]

Теперь выполни аналогичный анализ для следующего текста, соблюдая описанные шаги рассуждения:

"<ТВОЙ ТЕКСТ ЗДЕСЬ>"
